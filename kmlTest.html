<html>
  <head>
    <!-- May need jquery to ease development - e.g. loading json doc -->
    <script type="text/javascript" src="jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
 	
 	
    <script>
      var map ;
      function initialize() {
        var point = new google.maps.LatLng(51.5958, -0.11862);
        var mapOptions = {
          zoom: 11,
          center: point
        }

        var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        var ctaLayer = new google.maps.KmlLayer({
          // MUST BE PUBLIC URL!!! 
          url: 'https://raw.github.com/pbrewer/kml-sample/master/example.kml'
        });
        // set map to null to remove this kml from map
        ctaLayer.setMap(map);
        
        google.maps.event.addDomListener(document.getElementById('mapCodes'), 'change', loapMap);
      }

      function loadMap(event) {
        alert(event + " event received") ;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    
    <script>
    $(document).ready(function() {
        $.getJSON( "ajax/map_meta_data.json", function(data) {
            $.each(data.maps, function(key, value) {
            	$("#mapCodes").append('<option value="' + value.mapName + '">' + value.mapName + ', ' + value.mapCode + '</option>');
            });
    	});

        $("#mapCodes").change(function(){
            ctaLayer.setUrl(); 
			alert($("#mapCodes option:selected").val());
        });
    });

    </script>

  </head>

  <body>
  
    <!-- TODO populate select with options loaded from json -->
    <select id="mapCodes">
    </select>
    <div style="width: 1500px; height: 800px; margin-top: 20px;" id="map-canvas" />
    
  </body>
</html>
